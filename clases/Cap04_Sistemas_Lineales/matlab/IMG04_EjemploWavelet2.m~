% from https://www.youtube.com/watch?v=dSi9mLaa-WE&t=462s
% (c)   rashi agrawal
clear all ; close all
x = imread('cameraman.tif');
figure; imshow(x);

[xar,xhr,xvr,xdr] = dwt2(x,'db2');
%[xar,xhr,xvr,xdr] = dwt2(x(:,:,1),'db2');
%[xag,xhg,xvg,xdg] = dwt2(x(:,:,2),'db2');
%[xab,xhb,xvb,xdb] = dwt2(x(:,:,3),'db2');

xa(:,:,1) = xar ; %xa(:,:,2) = xag ; xa(:,:,3) = xab ;
xh(:,:,1) = xhr ; %xh(:,:,2) = xhg ; xh(:,:,3) = xhb ;
xv(:,:,1) = xvr ; %xv(:,:,2) = xvg ; xv(:,:,3) = xvb ;
xd(:,:,1) = xdr ; %xd(:,:,2) = xdg ; xd(:,:,3) = xdb ;

figure, imshow(xa/255) ;
figure, imshow(xh) ;
figure, imshow(xv) ;
figure, imshow(xd) ;

X1 = [xa*0.003 log10(xv)*0.3 ; log10(xh)*0.3 log10(xd)*0.3] ;
figure ; imshow(X1)

[xaar,xhhr,xvvr,xddr] = dwt2(xa(:,:,1),'db2');

xaa(:,:,1) = xaar ; 
xhh(:,:,1) = xhhr ; 
xvv(:,:,1) = xvvr ; 
xdd(:,:,1) = xddr ; 
figure,imshow(xaa/255);
figure,imshow(xhh);
figure,imshow(xvv);
figure,imshow(xdd);
X11 = [ xaa*0.001 log10(xvv)*0.3 ; log10(xhh)*0.3 log10(xdd)*0.3 ] ;
figure; imshow(X11)

[r,c,s] = size(xv);
figure ; imshow([X11(1:r,1:c,:) xv*0.05 ; xh*0.05 xd*0.05 ])